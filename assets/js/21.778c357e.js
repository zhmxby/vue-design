(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{62:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"platforms-web-util-目录下的工具方法全解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#platforms-web-util-目录下的工具方法全解","aria-hidden":"true"}},[t._v("#")]),t._v(" platforms/web/util 目录下的工具方法全解")]),a("h2",{attrs:{id:"index-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-js-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" index.js 文件")]),a("h3",{attrs:{id:"query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query","aria-hidden":"true"}},[t._v("#")]),t._v(" query")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("/**\n * Query an element selector if it's not an element already.\n */")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("query")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" Element"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Element "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" el "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'string'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" selected "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("selected"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'production'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("warn")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v("'Cannot find element: '")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" el\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'div'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" selected\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" el\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("ul",[a("li",[a("p",[t._v("描述：查询元素")])]),a("li",[a("p",[t._v("参数：")]),a("ul",[a("li",[a("code",[t._v("{String | Element} el")]),t._v(" css选择符或者DOM元素")])])]),a("li",[a("p",[t._v("返回值："),a("code",[t._v("{Element} el")]),t._v(" DOM 元素")])]),a("li",[a("p",[t._v("源码分析：")])])]),a("p",[t._v("如果参数是字符串，那么将该字符串作为 "),a("code",[t._v("css")]),t._v(" 选择符并使用 "),a("code",[t._v("document.querySelector()")]),t._v(" 函数查询元素，如果查找到该元素则返回该元素，否则在非生产环境下回打印警告信息并返回一个新创建的 "),a("code",[t._v("div")]),t._v("。")]),a("p",[t._v("如果参数不是一个字符串，则原封不动的返回参数。")]),a("h2",{attrs:{id:"attrs-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#attrs-js-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" attrs.js 文件")]),a("h3",{attrs:{id:"isreservedattr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#isreservedattr","aria-hidden":"true"}},[t._v("#")]),t._v(" isReservedAttr")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// these are reserved for web because they are directly compiled away")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// during template compilation")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isReservedAttr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("makeMap")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'style,class'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("ul",[a("li",[t._v("描述："),a("code",[t._v("isReservedAttr")]),t._v(" 函数是通过 "),a("code",[t._v("makeMap")]),t._v(" 生成的，用来检测一个属性是否是保留属性(web平台的保留属性)，由源码可知，保留属性有两个："),a("code",[t._v("style")]),t._v(" 和 "),a("code",[t._v("class")]),t._v("。")])]),a("h3",{attrs:{id:"mustuseprop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mustuseprop","aria-hidden":"true"}},[t._v("#")]),t._v(" mustUseProp")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// attributes that should be using props for binding")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" acceptValue "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("makeMap")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'input,textarea,option,select,progress'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mustUseProp "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("string"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attr"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'value'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("acceptValue")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" type "),a("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'button'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'selected'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'option'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'checked'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'input'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'muted'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'video'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("ul",[a("li",[t._v("描述：用来检测一个属性在标签中是否要使用元素对象原生的 "),a("code",[t._v("prop")]),t._v(" 进行绑定，注意："),a("strong",[t._v("这里的 "),a("code",[t._v("prop")]),t._v(" 指的是元素对象的属性，而非 "),a("code",[t._v("Vue")]),t._v(" 中的 "),a("code",[t._v("props")]),t._v(" 概念")]),t._v("。")])]),a("p",[t._v("举个例子，如下：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" el "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'div'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nel"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML  "),a("span",{attrs:{class:"token comment"}},[t._v("// 这里的 el.innerHTML 属性就是元素对象的属性")]),t._v("\n")])]),a("ul",[a("li",[a("p",[t._v("参数：")]),a("ul",[a("li",[a("code",[t._v("{String} tag")]),t._v(" 标签名")]),a("li",[a("code",[t._v("{String} type")]),t._v(" 标签的 "),a("code",[t._v("type")]),t._v(" 属性，多用于如 "),a("code",[t._v('<input type="button"/>')])]),a("li",[a("code",[t._v("{String} attr")]),t._v(" 属性名")])])]),a("li",[a("p",[t._v("返回值：如果给定的属性 "),a("code",[t._v("attr")]),t._v(" 在标签 "),a("code",[t._v("tag")]),t._v(" 中要使用元素对象原生的 "),a("code",[t._v("prop")]),t._v(" 进行绑定，那么就返回 "),a("code",[t._v("true")]),t._v("，否则 "),a("code",[t._v("false")]),t._v("。")])]),a("li",[a("p",[t._v("源码分析：")])])]),a("p",[t._v("首先定义一个函数 "),a("code",[t._v("acceptValue")]),t._v("，这是一个使用 "),a("code",[t._v("makeMap")]),t._v(" 生成的函数，用来检测标签是否是以下标签之一："),a("code",[t._v("input,textarea,option,select,progress")]),t._v("。")]),a("p",[a("code",[t._v("mustUseProp")]),t._v(" 的函数体就是一个由多个判断组成的语句：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// `input,textarea,option,select,progress` 这些标签的 value 属性都应该使用元素对象的原生的 prop 绑定（除了 type === 'button' 之外）")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'value'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("acceptValue")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" type "),a("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'button'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// option 标签的 selected 属性应该使用元素对象的原生的 prop 绑定")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'selected'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'option'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// input 标签的 checked 属性应该使用元素对象的原生的 prop 绑定")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'checked'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'input'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// video 标签的 muted 属性应该使用元素对象的原生的 prop 绑定")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'muted'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'video'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("p",[t._v("总结为：属于以下几种情况之一的，应该改使用元素对象的原生 "),a("code",[t._v("prop")]),t._v(" 绑定：")]),a("ul",[a("li",[a("code",[t._v("input,textarea,option,select,progress")]),t._v(" 这些标签的 "),a("code",[t._v("value")]),t._v(" 属性都应该使用元素对象的原生的 "),a("code",[t._v("prop")]),t._v(" 绑定（除了 "),a("code",[t._v("type === 'button'")]),t._v(" 之外）")]),a("li",[a("code",[t._v("option")]),t._v(" 标签的 "),a("code",[t._v("selected")]),t._v(" 属性应该使用元素对象的原生的 "),a("code",[t._v("prop")]),t._v(" 绑定")]),a("li",[a("code",[t._v("input")]),t._v(" 标签的 "),a("code",[t._v("checked")]),t._v(" 属性应该使用元素对象的原生的 "),a("code",[t._v("prop")]),t._v(" 绑定")]),a("li",[a("code",[t._v("video")]),t._v(" 标签的 "),a("code",[t._v("muted")]),t._v(" 属性应该使用元素对象的原生的 "),a("code",[t._v("prop")]),t._v(" 绑定")])]),a("h2",{attrs:{id:"class-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-js-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" class.js 文件")]),a("h2",{attrs:{id:"compat-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compat-js-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" compat.js 文件")]),a("p",[a("code",[t._v("compat.js")]),t._v(" 文件的全部代码如下：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" inBrowser "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'core/util/index'")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// check whether current browser encodes a char inside attribute values")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" div\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getShouldDecode")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("href"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  div "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" div "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'div'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  div"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" href "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v('`<a href="\\n"/>`')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v('`<div a="\\n"/>`')])]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" div"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'&#10;'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// #3663: IE encodes newlines inside attribute values while other browsers don't")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shouldDecodeNewlines "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" inBrowser "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getShouldDecode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// #6828: chrome encodes content in a[href]")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shouldDecodeNewlinesForHref "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" inBrowser "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getShouldDecode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n")])]),a("p",[t._v("该文件主要导出两个变量，分别是 "),a("code",[t._v("shouldDecodeNewlines")]),t._v(" 和 "),a("code",[t._v("shouldDecodeNewlinesForHref")]),t._v("，这两个变量都是布尔值，那么这两个变量是干嘛的呢？我们看一个例子就知道了，假设我们有如下 DOM：")]),a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("link-box"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 注意 href 属性值，链接后面加了一个换行 --\x3e")]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://hcysun.me\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("aaaa"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 注意 href 属性值，链接后面加了一个Tab --\x3e")]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://hcysun.me\t"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("bbbb"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),a("p",[t._v("上面的 DOM 看上去貌似没有什么奇特地方，关键点在于 "),a("code",[t._v("<a>")]),t._v(" 标签的 "),a("code",[t._v("href")]),t._v(" 属性，我们在第一个 "),a("code",[t._v("<a>")]),t._v(" 标签的 "),a("code",[t._v("href")]),t._v(" 属性值后面添加了换行符，在第二个 "),a("code",[t._v("<a>")]),t._v(" 标签的 "),a("code",[t._v("href")]),t._v(" 属性值后面添加了制表符。那么这么做会有什么影响呢？执行下面的代码就显而易见了：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'link-box'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("p",[t._v("上面的代码中我们打印了 "),a("code",[t._v("id")]),t._v(" 为 "),a("code",[t._v("link-box")]),t._v(" 的 "),a("code",[t._v("innerHTML")]),t._v("，如下图：")]),a("p",[a("img",{attrs:{src:"http://ovjvjtt4l.bkt.clouddn.com/2017-11-15-123008.jpg",alt:""}})]),a("p",[t._v("注意，只有在 "),a("code",[t._v("chrome")]),t._v(" 浏览器下才能获得如上效果，可以发现，在获取的内容中换行符和制表符分别被转换成了 "),a("code",[t._v("&#10")]),t._v(" 和 "),a("code",[t._v("&#9")]),t._v("。实际上，这算是浏览器的怪癖行为。在 "),a("code",[t._v("IE")]),t._v(" 中，不仅仅是 "),a("code",[t._v("a")]),t._v(" 标签的 "),a("code",[t._v("href")]),t._v(" 属性值，任何属性值都存在这个问题。这就会影响 "),a("code",[t._v("Vue")]),t._v(" 的编译器在对模板进行编译后的结果，导致莫名奇妙的问题，为了避免这些问题 "),a("code",[t._v("Vue")]),t._v(" 需要知道什么时候要做兼容工作，这就是 "),a("code",[t._v("shouldDecodeNewlines")]),t._v(" 和 "),a("code",[t._v("shouldDecodeNewlinesForHref")]),t._v(" 这两个变量的作用。")]),a("p",[t._v("下面我们看一下具体实现，首先定义了一个函数 "),a("code",[t._v("getShouldDecode")]),t._v("：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" div\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getShouldDecode")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("href"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  div "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" div "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'div'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  div"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" href "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v('`<a href="\\n"/>`')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v('`<div a="\\n"/>`')])]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" div"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'&#10;'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("该函数的作用是判断当前浏览器是否会对属性值中所包含的换行符进行编码，如果是则返回真，否则返回假。其实现原理分三步：")]),a("ul",[a("li",[t._v("1、创建一个 "),a("code",[t._v("div")])]),a("li",[t._v("2、设置这个 "),a("code",[t._v("div")]),t._v(" 的 "),a("code",[t._v("innerHTML")]),t._v(" 为 "),a("code",[t._v('<a href="\\n"/>')]),t._v(" 或者 "),a("code",[t._v('<div a="\\n"/>')])]),a("li",[t._v("3、获取该 "),a("code",[t._v("div")]),t._v(" 的 "),a("code",[t._v("innerHTML")]),t._v(" 并检测换行符是否被编码")])]),a("p",[a("code",[t._v("getShouldDecode")]),t._v(" 接受一个布尔值参数 "),a("code",[t._v("href")]),t._v("，如果该参数为 "),a("code",[t._v("true")]),t._v(" 意味着要监测的是 "),a("code",[t._v("a")]),t._v(" 标签的 "),a("code",[t._v("href")]),t._v(" 属性，否则检测任意属性。")]),a("p",[t._v("有了上面的函数再实现 "),a("code",[t._v("shouldDecodeNewlines")]),t._v(" 和 "),a("code",[t._v("shouldDecodeNewlinesForHref")]),t._v(" 这两个变量就容易多了：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shouldDecodeNewlines "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" inBrowser "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getShouldDecode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shouldDecodeNewlinesForHref "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" inBrowser "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getShouldDecode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n")])]),a("p",[t._v("最终如果 "),a("code",[t._v("shouldDecodeNewlines")]),t._v(" 为 "),a("code",[t._v("true")]),t._v("，意味着 "),a("code",[t._v("Vue")]),t._v(" 在编译模板的时候，要对属性值中的换行符或制表符做兼容处理。而 "),a("code",[t._v("shouldDecodeNewlinesForHref")]),t._v(" 为 "),a("code",[t._v("true")]),t._v(" 意味着 "),a("code",[t._v("Vue")]),t._v(" 在编译模板的时候，要对 "),a("code",[t._v("a")]),t._v(" 标签的 "),a("code",[t._v("href")]),t._v(" 属性值中的换行符或制表符做兼容处理。当然，一切都是以在浏览器中为前提的，因为上面的代码中存在一个 "),a("code",[t._v("inBrowser")]),t._v(" 的判断。")]),a("p",[t._v("最后再啰嗦一句，为什么只在浏览器中才需要判断是否需要做此兼容处理呢？那是因为，只有完整版(包括编译器)的 "),a("code",[t._v("Vue")]),t._v("才会遇到这个问题，因为只有完整版的 "),a("code",[t._v("Vue")]),t._v(" 才会在浏览器中对模板就行编译，才有可能在获取模板的时候使用 "),a("code",[t._v("innerHTML")]),t._v(" 获取模板内容。")]),a("h2",{attrs:{id:"element-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#element-js-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" element.js 文件")]),a("h3",{attrs:{id:"ishtmltag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ishtmltag","aria-hidden":"true"}},[t._v("#")]),t._v(" isHTMLTag")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isHTMLTag "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("makeMap")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'html,body,base,head,link,meta,style,title,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'embed,object,param,source,canvas,script,noscript,del,ins,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'caption,col,colgroup,table,thead,tbody,td,th,tr,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'output,progress,select,textarea,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'details,dialog,menu,menuitem,summary,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'content,element,shadow,template,blockquote,iframe,tfoot'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("ul",[a("li",[a("p",[t._v("描述：检查是否是HTML标签")])]),a("li",[a("p",[t._v("源码分析")])])]),a("p",[a("code",[t._v("isHTMLTag")]),t._v(" 是一个使用 "),a("code",[t._v("makeMap")]),t._v(" 生成的函数，可以在 "),a("a",{attrs:{href:"../shared-util"}},[t._v("shared/util.js 文件工具方法全解")]),t._v(" 中查看 "),a("code",[t._v("makeMap")]),t._v(" 方法。")]),a("h3",{attrs:{id:"issvg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#issvg","aria-hidden":"true"}},[t._v("#")]),t._v(" isSVG")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// this map is intentionally selective, only covering SVG elements that may")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// contain child elements.")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isSVG "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("makeMap")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("ul",[a("li",[a("p",[t._v("描述：检查是否是SVG标签")])]),a("li",[a("p",[t._v("源码分析")])])]),a("p",[a("code",[t._v("isSVG")]),t._v(" 是一个使用 "),a("code",[t._v("makeMap")]),t._v(" 生成的函数，可以在 "),a("a",{attrs:{href:"../shared-util"}},[t._v("shared/util.js 文件工具方法全解")]),t._v(" 中查看 "),a("code",[t._v("makeMap")]),t._v(" 方法。")]),a("h3",{attrs:{id:"ispretag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ispretag","aria-hidden":"true"}},[t._v("#")]),t._v(" isPreTag")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isPreTag "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("string"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'pre'")]),t._v("\n")])]),a("ul",[a("li",[a("p",[t._v("描述：检查给定的标签是否是 "),a("code",[t._v("pre")]),t._v(" 标签")])]),a("li",[a("p",[t._v("源码分析")])])]),a("p",[t._v("通过 "),a("code",[t._v("tag === 'pre'")]),t._v(" 进行判断。")]),a("h3",{attrs:{id:"isreservedtag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#isreservedtag","aria-hidden":"true"}},[t._v("#")]),t._v(" isReservedTag")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isReservedTag "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("boolean "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("isHTMLTag")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("isSVG")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("ul",[a("li",[a("p",[t._v("描述：检查给定的标签是否是保留的标签")])]),a("li",[a("p",[t._v("源码分析")])])]),a("p",[t._v("通过如下代码：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("isHTMLTag")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("isSVG")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("p",[t._v("判断一个标签是否是保留标签，我们可以知道，如果一个标签是 "),a("code",[t._v("html")]),t._v(" 标签，或者是 "),a("code",[t._v("svg")]),t._v(" 标签，那么这个标签即使保留标签。")]),a("h3",{attrs:{id:"gettagnamespace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gettagnamespace","aria-hidden":"true"}},[t._v("#")]),t._v(" getTagNamespace")]),a("ul",[a("li",[t._v("源码如下：")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getTagNamespace")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("string "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("isSVG")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'svg'")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// basic support for MathML")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// note it doesn't support other MathML elements being component roots")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'math'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'math'")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("ul",[a("li",[a("p",[t._v("描述：获取元素(标签)的命名空间")])]),a("li",[a("p",[t._v("参数：")]),a("ul",[a("li",[a("code",[t._v("{String} tag")]),t._v(" 标签名")])])]),a("li",[a("p",[t._v("返回值："),a("code",[t._v("{String | undefined}")]),t._v(" 如果一个标签满足 "),a("code",[t._v("isSVG(tag)")]),t._v("，则返回 "),a("code",[t._v("'svg'")]),t._v("，如果标签为 "),a("code",[t._v("math")]),t._v(" 则返回 "),a("code",[t._v("'math'")]),t._v("，其他情况返回 "),a("code",[t._v("undefined")]),t._v("。")])])]),a("h2",{attrs:{id:"style-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#style-js-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" style.js 文件")])])}],!1,null,null,null);s.default=e.exports}}]);